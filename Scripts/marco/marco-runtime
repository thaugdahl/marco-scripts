#!/bin/bash

source $MARCO_SETUP_SCRIPTS_DIR/marco-config

RUNTIME_SOURCE_DIR=$MARCO_PROJECT_ROOT/source/marco-runtime

if [ $# -lt 1 ]; then
    MARCO_BUILD_TYPE=Release
else
    MARCO_BUILD_TYPE=$1
fi

if ! [ -z "$SUNDIALS_PATH" ]; then
cmake \
  -DCMAKE_BUILD_TYPE=${MARCO_BUILD_TYPE} \
  -DCMAKE_INSTALL_PREFIX=${MARCO_RUNTIME_INSTALL_PATH} \
  -DMARCO_USE_BUILTIN_SUNDIALS=ON \
  -DSUNDIALS_PATH=${SUNDIALS_PATH} \
  -DLLVM_PATH=${MARCO_LLVM_INSTALL_PATH} \
  -DCMAKE_EXPORT_COMPILE_COMMANDS=YES \
  -S $RUNTIME_SOURCE_DIR -B $RUNTIME_SOURCE_DIR/build
else
cmake \
  -DCMAKE_BUILD_TYPE=${MARCO_BUILD_TYPE} \
  -DCMAKE_INSTALL_PREFIX=${MARCO_RUNTIME_INSTALL_PATH} \
  -DLLVM_PATH=${MARCO_LLVM_INSTALL_PATH} \
  -DCMAKE_EXPORT_COMPILE_COMMANDS=YES \
  -S $RUNTIME_SOURCE_DIR -B $RUNTIME_SOURCE_DIR/build
fi


# vim: set ft=sh:
